# Руководство по развертыванию на GitHub Pages

Этот документ поможет вам успешно опубликовать и обновлять ваше Next.js приложение на GitHub Pages. Следуйте этим шагам, чтобы избежать распространенных ошибок.

## Ключевые принципы развертывания на GitHub Pages

GitHub Pages предназначен для хостинга **статических сайтов**. Это означает, что ваше Next.js приложение должно быть настроено для статической генерации, и в нем не могут использоваться серверные функции.

1.  **Только статика**: Никакого серверного кода. Функции вроде Server Actions (`'use server'`) или динамическая обработка запросов на сервере не поддерживаются. Вся логика должна выполняться в браузере клиента.
2.  **Конфигурация Next.js**: В файле `next.config.ts` должен быть включен режим статического экспорта (`output: 'export'`).
3.  **Автоматическое развертывание**: Процесс сборки и публикации автоматизирован с помощью GitHub Actions. Вам не нужно ничего делать вручную, кроме первоначальной настройки репозитория.

---

## Первоначальная настройка репозитория

Эти шаги нужно выполнить только один раз для вашего репозитория.

1.  **Отправьте код на GitHub**: Убедитесь, что все последние изменения, включая файл рабочего процесса `.github/workflows/deploy.yml`, отправлены в `main` ветку вашего репозитория.

2.  **Дождитесь выполнения Actions**:
    *   Перейдите на вкладку **Actions** в вашем репозитории.
    *   Найдите рабочий процесс (workflow) с названием **Deploy to GitHub Pages**.
    *   Дождитесь его успешного завершения (он должен быть отмечен зеленой галочкой). Это может занять несколько минут.

3.  **Настройте источник публикации**:
    *   Перейдите на вкладку **Settings** в вашем репозитории.
    *   В меню слева выберите раздел **Pages**.
    *   В секции "Build and deployment" ("Сборка и развертывание") найдите выпадающий список **Source** ("Источник").
    *   Выберите **GitHub Actions**.

4.  **Получите ссылку на ваш сайт**:
    *   После сохранения настроек страница обновится. Вверху появится зеленая плашка с сообщением, что ваш сайт успешно опубликован.
    *   Ссылка будет иметь вид: `https://<ВАШ-НИКНЕЙМ>.github.io/<НАЗВАНИЕ-РЕПОЗИТОРИЯ>/`.

Сайт может стать доступен не мгновенно, а в течение нескольких минут.

---

## Как вносить изменения и обновлять сайт

После первоначальной настройки процесс обновления очень прост:

1.  **Вносите изменения в код локально.**
2.  **Отправляйте (push) ваши изменения** в `main` ветку вашего репозитория на GitHub.

Это все! GitHub Actions автоматически обнаружит изменения, запустит процесс сборки и опубликует новую версию вашего сайта. Через несколько минут обновления появятся по той же ссылке.

---

## Устранение распространенных ошибок

Если ваш сайт не публикуется, проверьте следующее:

*   **Ошибка "Server Actions are not supported with static export"**:
    *   **Причина**: Вы добавили код с директивой `'use server'`.
    *   **Решение**: Переместите эту логику на сторону клиента (внутрь React-компонента) или удалите ее. GitHub Pages не может выполнять серверный код.

*   **Рабочий процесс (Action) завершается с ошибкой**:
    *   **Причина**: Часто это связано с ошибками в коде, которые мешают процессу сборки (`npm run build`).
    *   **Решение**: Перейдите на вкладку **Actions**, выберите упавший рабочий процесс и изучите логи сборки. Они укажут на конкретный файл и строку, где произошла ошибка.

*   **Стили или изображения не загружаются на опубликованном сайте**:
    *   **Причина**: Неправильно настроены пути (`basePath` и `assetPrefix`) в `next.config.ts`.
    *   **Решение**: Убедитесь, что конфигурация в `next.config.ts` соответствует той, что была настроена в этом проекте. Она должна автоматически подставлять имя репозитория в пути для корректной работы на GitHub Pages.
